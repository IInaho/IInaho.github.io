<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png"><link rel="icon" type="image/png" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content=""><meta name="author" content="John Doe"><meta name="keywords" content=""><title>Cache与辅助存储器 ~ inaho</title><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.10.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/mdbootstrap/4.8.7/css/mdb.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/3.0.1/github-markdown.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css"><link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/fancybox/jquery.fancybox.min.css"><style type="text/css">.banner-bg{background-image:url(/img/bg13.jpg);background-position:center;background-repeat:repeat-y;background-size:cover;background-attachment:fixed}</style><meta name="generator" content="Hexo 4.2.1"></head><body class="banner-bg"><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>阴月有晴</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/">主页</a></li><li class="nav-item"><a class="nav-link" href="/archives/">归档</a></li><li class="nav-item"><a class="nav-link" href="/tags/">标签</a></li><li class="nav-item"><a class="nav-link" href="/about/">关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i class="iconfont icon-search"></i>&nbsp;&nbsp;</a></li></ul></div></div></nav><div class="view intro-2 rgba-black-slight" id="background"><div class="full-bg-img"><div class="mask flex-center"><div class="container text-center white-text fadeInUp"><span class="h2" id="subtitle"></span><br><p class="mt-3"><i class="fas fa-calendar-alt" aria-hidden="true"></i>&nbsp; 星期日, 五月 10日 2020, 11:15 上午</p><p>&nbsp;<i class="far fa-chart-bar"></i> <span class="post-count">1.3k 字 </span>&nbsp; &nbsp;<i class="far fa-clock"></i> <span class="post-count">4 分钟 </span>&nbsp; &nbsp;<i class="far fa-eye" aria-hidden="true"></i>&nbsp; <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span> 次 </span>&nbsp;</p></div></div></div></div></header><main id="mainContent" class="rgba-black-slight"><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="py-5 z-depth-3" id="board"><div class="post-content mx-auto" id="post"><div class="markdown-body"><h1 id="Cache与辅助存储器"><a href="#Cache与辅助存储器" class="headerlink" title="Cache与辅助存储器"></a>Cache与辅助存储器</h1><h2 id="Cache概述"><a href="#Cache概述" class="headerlink" title="Cache概述"></a>Cache概述</h2><h3 id="为什么使用Cache？"><a href="#为什么使用Cache？" class="headerlink" title="为什么使用Cache？"></a>为什么使用Cache？</h3><ul><li>避免CPU”空等”现象</li><li>CPU和主存(DRAM)的速度差异<br><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/1.png" srcset="/img/loading.gif" width="350px" height="230px"></li><li>程序访问的局部性原理</li></ul><h2 id="Cache的工作原理"><a href="#Cache的工作原理" class="headerlink" title="Cache的工作原理"></a>Cache的工作原理</h2><h3 id="主存和缓存的编址"><a href="#主存和缓存的编址" class="headerlink" title="主存和缓存的编址"></a>主存和缓存的编址</h3><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/2.png" srcset="/img/loading.gif" width="350px" height="230px"><br>主存和缓存按块存储，块的大小相同，B为块长。缓存的块远远小于主存的块，如果主存要和Cache映射，那么至少要保证主存中每块大小应与Cache中每块大小相同。<br>每个字块包含N个字，主存的地址应该分成两部分，一部分用来寻找某个字块，另一部分用来寻找该字块中的字或字节。</p><h3 id="命中与未命中"><a href="#命中与未命中" class="headerlink" title="命中与未命中"></a>命中与未命中</h3><p>缓存共有C块，主存共有M块，M&gt;&gt;C.</p><ul><li>命中: 主存块调入缓存，主存块与缓存块 建立了对应关系。</li><li>未命中: 主存块未调入缓存，主存块与缓存块未建立对应关系。</li></ul><blockquote><p>用标记记录与某缓存块建立了对应关系的主存块号。</p></blockquote><h4 id="Cache的命中率"><a href="#Cache的命中率" class="headerlink" title="Cache的命中率"></a>Cache的命中率</h4><p>CPU欲访问的信息在Cache中的比率，命中率与Cache的容量与块长有关，一般每块可取4-8个字。<br>块长取一个存取周期内从主存调出的信息长度。</p><blockquote><ul><li>CRAY_1,16体交叉，块长取16个存储字。</li><li>IBM370/168，4体交叉，块长取4个存储字，一个存储字64位，一次取256位。</li></ul></blockquote><h3 id="Cache-主存系统的效率"><a href="#Cache-主存系统的效率" class="headerlink" title="Cache-主存系统的效率"></a>Cache-主存系统的效率</h3><p>效率e与命中率有关，e=访问Cache的时间/平均访问时间 <em>100%。<br>设Cache命中率为h，访问Cache的时间为tc，访问主存的时间为tm，则e=tc/h</em>tc+(1-h)<em>tm</em>100%.</p><h3 id="Cache的基本结构"><a href="#Cache的基本结构" class="headerlink" title="Cache的基本结构"></a>Cache的基本结构</h3><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/3.png" srcset="/img/loading.gif" width="350px" height="230px"></p><h3 id="Cache的读写操作"><a href="#Cache的读写操作" class="headerlink" title="Cache的读写操作"></a>Cache的读写操作</h3><h4 id="读操作"><a href="#读操作" class="headerlink" title="读操作"></a>读操作</h4><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/4.png" srcset="/img/loading.gif" width="350px" height="230px"></p><h4 id="写操作"><a href="#写操作" class="headerlink" title="写操作"></a>写操作</h4><ul><li>写直达法(Write-through)<br>写操作时数据既写入Cache，又写入主存。<br>写操作时间就是访问主存的时间，Cache块退出时，不需要对主存执行写操作，更新策略比较容易实现。</li><li>写回法(Write-back)<br>写操作时只把数据写入Cache而不写入主存，当Cache数据被替换出去时才写回主存。<br>写操作时间就是访问Cache的时间，Cache块退出时，被替换的块需写回主存 ，增加了Cache的复杂性。</li></ul><h3 id="Cache的改进"><a href="#Cache的改进" class="headerlink" title="Cache的改进"></a>Cache的改进</h3><ol><li>增加Cache的级数，如片载(片内)Cache,片外Cache。</li><li>统一缓存和分立缓存，冯诺依曼结构将指令Cache和数据Cache统一整合，现在计算机可以将指令Cache与数据Cache分开，这个方式与指令执行的控制方式有关。</li><li>Pentium，8K指令Cache，8K数据Cache。</li><li>PowerPC620，32K指令Cache，32K数据Cache。</li></ol><h2 id="Cache-主存的地址映射"><a href="#Cache-主存的地址映射" class="headerlink" title="Cache-主存的地址映射"></a>Cache-主存的地址映射</h2><h3 id="直接映射"><a href="#直接映射" class="headerlink" title="直接映射"></a>直接映射</h3><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/5.png" srcset="/img/loading.gif" width="350px" height="230px"><br>每个缓存块i可以和若干个主存块对应<br>每个主存块i只能和一个缓存块对应</p><h3 id="全相联映射"><a href="#全相联映射" class="headerlink" title="全相联映射"></a>全相联映射</h3><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/6.png" srcset="/img/loading.gif" width="350px" height="230px"><br>主存中的任一块可以映射到缓存中的任一块</p><h3 id="组相联映射"><a href="#组相联映射" class="headerlink" title="组相联映射"></a>组相联映射</h3><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/7.png" srcset="/img/loading.gif" width="350px" height="230px"><br>某一主存块j按模Q映射到缓存的第i组中的任一块，当组相联只有一组时，此时组相联映射等同于全相联映射，当每组只有一块时，此时组相联映射等同于直接映射。</p><h2 id="替换算法"><a href="#替换算法" class="headerlink" title="替换算法"></a>替换算法</h2><ol><li>先进先出(FIFO)算法</li><li>近期最少使用(LRU)算法</li></ol><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul><li>直接，某一主存块只能固定映射到某一缓存块</li><li>全相联，某一主存块能映射到任一缓存块</li><li>组相联，某一主存块只能映射到某一缓存组中的任一块</li></ul><h2 id="辅助存储器"><a href="#辅助存储器" class="headerlink" title="辅助存储器"></a>辅助存储器</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ol><li>特点，不直接与CPU交换信息</li><li>磁表面存储器的技术指标<ul><li>记录密度，道密度Dt，位密度Db</li><li>存储容量，C=n<em>k</em>s</li><li>平均寻址时间，寻道时间+等待时间<ul><li>辅存的速度<ul><li>寻址时间</li><li>磁头读写时间</li></ul></li></ul></li><li>数据传输率，Dr=Db*V</li><li>误码率，出错信息位数与读出信息的总位数之比。</li></ul></li></ol><h3 id="磁记录原理和记录方式"><a href="#磁记录原理和记录方式" class="headerlink" title="磁记录原理和记录方式"></a>磁记录原理和记录方式</h3><h4 id="磁记录写原理"><a href="#磁记录写原理" class="headerlink" title="磁记录写原理"></a>磁记录写原理</h4><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/8.png" srcset="/img/loading.gif" width="350px" height="230px"></p><h4 id="磁记录读原理"><a href="#磁记录读原理" class="headerlink" title="磁记录读原理"></a>磁记录读原理</h4><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/9.png" srcset="/img/loading.gif" width="350px" height="230px"></p><h3 id="硬磁盘存储器"><a href="#硬磁盘存储器" class="headerlink" title="硬磁盘存储器"></a>硬磁盘存储器</h3><h4 id="硬磁盘存储器的类型"><a href="#硬磁盘存储器的类型" class="headerlink" title="硬磁盘存储器的类型"></a>硬磁盘存储器的类型</h4><ol><li>固定磁头和移动磁头</li><li>可换盘和固定盘</li></ol><h4 id="硬磁盘存储器结构"><a href="#硬磁盘存储器结构" class="headerlink" title="硬磁盘存储器结构"></a>硬磁盘存储器结构</h4><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/10.png" srcset="/img/loading.gif" width="350px" height="230px"></p><ol><li>磁盘驱动器<br><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/11.png" srcset="/img/loading.gif" width="350px" height="230px"></li><li>磁盘控制器<ul><li>接收主机发来的命令，转换成磁盘驱动器的控制命令</li><li>实现主机和驱动器之间的数据格式转换</li><li>控制磁盘驱动器读写</li><li>磁盘控制器是主机和磁盘驱动器之间的接口<ul><li>对主机，通过总线</li><li>对硬盘(设备)</li></ul></li></ul></li><li>盘片<br>由硬质铝合金材料制成</li></ol><h3 id="软磁盘存储器"><a href="#软磁盘存储器" class="headerlink" title="软磁盘存储器"></a>软磁盘存储器</h3><h4 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h4><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/12.png" srcset="/img/loading.gif" width="350px" height="230px"></p><h4 id="软盘片"><a href="#软盘片" class="headerlink" title="软盘片"></a>软盘片</h4><p><img src="/2020/05/10/Cache%E4%B8%8E%E8%BE%85%E5%8A%A9%E5%AD%98%E5%82%A8%E5%99%A8/13.png" srcset="/img/loading.gif" width="350px" height="230px"></p><h3 id="光盘存储器"><a href="#光盘存储器" class="headerlink" title="光盘存储器"></a>光盘存储器</h3><h4 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h4><p>采用光存储技术，利用激光写入和读出</p><ul><li>第一代光存储技术，采用非磁性介质，不可擦写</li><li>第二代光存储技术，采用磁性介质，可擦写</li></ul><h4 id="光盘的存储原理"><a href="#光盘的存储原理" class="headerlink" title="光盘的存储原理"></a>光盘的存储原理</h4><p>只读型和只写一次型—热作用(物理或化学变化)<br>可擦写光盘—热磁效应</p><hr></div><br><div><p><span><i class="iconfont icon-tag"></i> <a class="hover-with-bg" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86">计算机组成原理</a></span></p><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p><div class="col-lg-7 mx-auto nopadding-md"><div class="container comments mx-auto" id="comments"><br><br><div class="disqus" style="width:100%"><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="http://yoursite.com/2020/05/10/Cache与辅助存储器/",this.page.identifier="/2020/05/10/Cache与辅助存储器/"},oldLoad=window.onload;window.onload=function(){var t=document,e=t.createElement("script");e.type="text/javascript",e.src="//inaho-top.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" target="_blank" rel="nofollow noopener noopener">comments powered by Disqus.</a></noscript></div></div></div></div></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container"><div id="toc"><p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p><div id="tocbot"></div></div></div></div></div></main><a class="z-depth-1" id="scroll-top-button" href="#" role="button"><i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><div id="footerContent" class="rgba-black-slight"><footer class="pt-5"><div style="color:#fff" class="text-center py-3"><a style="color:#fff" href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo支持</b></a> <i class="iconfont icon-love"></i> <a style="color:#fff" href="https://disqus.com/" target="_blank" rel="nofollow noopener"><b>Disqus 评论系统 </b></a><i class="iconfont icon-love"></i> <a style="color:#fff" href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><b>主题Fluid </b></a><i class="iconfont icon-love"></i> <a style="color:#fff" href="https://www.pixiv.net/" target="_blank" rel="nofollow noopener"><b>图片 Pixiv</b></a><br>&nbsp;<span id="busuanzi_container_site_pv">总访问量 <span id="busuanzi_value_site_pv"></span> 次</span>&nbsp; &nbsp;<span id="busuanzi_container_site_uv">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span>&nbsp;<br></div></footer></div><script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script><script src="/lib/popper/popper.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script><script src="https://cdn.staticfile.org/mdbootstrap/4.8.7/js/mdb.min.js"></script><script src="/js/main.js"></script><script src="/js/lazyload.js"></script><script src="/lib/tocbot/tocbot.min.js"></script><script src="/js/post.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/lib/prettify/prettify.min.js"></script><script>$(document).ready((function(){$("pre").addClass("prettyprint  linenums"),prettyPrint()}))</script><script src="/lib/typed/typed.min.js"></script><script>var typed=new Typed("#subtitle",{strings:["  ","Cache与辅助存储器&nbsp;"],cursorChar:"_",typeSpeed:70,loop:!1});typed.stop(),$(document).ready((function(){$(".typed-cursor").addClass("h2"),typed.start()}))</script><script src="https://cdn.staticfile.org/anchor-js/4.2.0/anchor.min.js"></script><script>anchors.options={placement:"right",visible:"false"};var el="h1,h2,h3,h4,h5,h6".split(","),res=[];for(item of el)res.push(".markdown-body > "+item);anchors.add(res.join(", "))</script><script src="/js/local-search.js"></script><script>var path="/local-search.xml",inputArea=document.querySelector("#local-search-input");inputArea.onclick=function(){getSearchFile(path),this.onclick=null}</script><script src="/lib/fancybox/jquery.fancybox.min.js"></script><script>$("#post img:not(.no-zoom img, img[no-zoom])").each((function(){var t=document.createElement("a");$(t).attr("data-fancybox","images"),$(t).attr("href",$(this).attr("src")),$(this).wrap(t)}))</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
          tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
              processEscapes: true,
              skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
          }
      });

      MathJax.Hub.Queue(function() {
          var all = MathJax.Hub.getAllJax(), i;
          for(i=0; i < all.length; i += 1) {
              all[i].SourceElement().parentNode.className += ' has-jax';
          }
      });</script><script src="https://cdn.staticfile.org/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type="text/javascript">$("#background").removeClass("banner-bg"),$("body").addClass("banner-bg");var postToTopHight=$("#board").offset().top;$(window).scroll((function(){document.body.scrollTop+document.documentElement.scrollTop>=postToTopHight?($("#background").removeClass("rgba-black-slight"),$("#mainContent").removeClass("rgba-black-slight"),$("#footerContent").removeClass("rgba-black-slight")):($("#background").addClass("rgba-black-slight"),$("#mainContent").addClass("rgba-black-slight"),$("#footerContent").addClass("rgba-black-slight"))}))</script></body></html>